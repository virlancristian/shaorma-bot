function csvArguments(input) {
    input = input.replace(/[^a-zA-Z0-9,]/g, '');
    return input.split(",");
}

async function queryGuildForUser(username, guild) {
    try {
        let user = await guild.members.fetch({ query: username, limit: 1 });
        return user.first();
    } catch (error) {
        console.error("Couldn't fetch guild user by ID:", error);
    }
}

function userId(input, guild) {
    const isMention = /<@(\d+)>/;

    return (isMention.test(input))
        ? input.match(/\d+/)[0]
    : queryGuildForUser(input, guild);
}

module.exports = {
    userId: userId,
    csvArguments: csvArguments
}